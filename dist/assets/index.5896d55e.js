import{r as c,d as Su}from"./react-vendor.ddbcdeae.js";import{H as o,p as g}from"./lark-sdk.e8b48be6.js";import{T as p,M as Nu,j as i,a as e,b,I as Lu,c as ku,S as vu,B as A,F as Mu,d as du,e as v,f as Fu,g as Bu,h as Ou,i as Eu,k as K,P as $u,l as Iu,E as _u,C as hu}from"./semi-ui.6ff46d90.js";import"./vendor.727bd019.js";import"#minpath";import"#minproc";import"#minurl";(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))T(h);new MutationObserver(h=>{for(const D of h)if(D.type==="childList")for(const L of D.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&T(L)}).observe(document,{childList:!0,subtree:!0});function x(h){const D={};return h.integrity&&(D.integrity=h.integrity),h.referrerpolicy&&(D.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?D.credentials="include":h.crossorigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function T(h){if(h.ep)return;h.ep=!0;const D=x(h);fetch(h.href,D)}})();const X="boom-table-shredder-snapshot",Z="boom.table-shredder.snapshot.v1",Pu=[o.CreatedTime,o.ModifiedTime,o.CreatedUser,o.ModifiedUser,o.AutoNumber],Ru=new Set([o.Lookup,o.SingleLink,o.DuplexLink,o.Formula,o.Barcode]),ju=o,zu={[o.Text]:"\u6587\u672C",[o.Number]:"\u6570\u5B57",[o.SingleSelect]:"\u5355\u9009",[o.MultiSelect]:"\u591A\u9009",[o.DateTime]:"\u65E5\u671F / \u65F6\u95F4",[o.Checkbox]:"\u52FE\u9009",[o.User]:"\u6210\u5458",[o.Phone]:"\u624B\u673A\u53F7",[o.Url]:"\u94FE\u63A5",[o.Attachment]:"\u9644\u4EF6",[o.SingleLink]:"\u5173\u8054\uFF08\u5355\u5411\uFF09",[o.DuplexLink]:"\u5173\u8054\uFF08\u53CC\u5411\uFF09",[o.Lookup]:"\u56DE\u586B",[o.Formula]:"\u516C\u5F0F",[o.Location]:"\u5730\u7406\u4F4D\u7F6E",[o.GroupChat]:"\u7FA4\u804A",[o.Object]:"\u5BF9\u8C61",[o.Progress]:"\u8FDB\u5EA6",[o.Currency]:"\u91D1\u989D",[o.Rating]:"\u8BC4\u5206",[o.Email]:"\u90AE\u7BB1",[o.CreatedTime]:"\u521B\u5EFA\u65F6\u95F4",[o.ModifiedTime]:"\u66F4\u65B0\u65F6\u95F4",[o.CreatedUser]:"\u521B\u5EFA\u4EBA",[o.ModifiedUser]:"\u66F4\u65B0\u4EBA",[o.AutoNumber]:"\u81EA\u52A8\u7F16\u53F7",[o.Barcode]:"\u6761\u7801 / \u4E8C\u7EF4\u7801",[o.NotSupport]:"\u6682\u4E0D\u652F\u6301",[o.Denied]:"\u65E0\u6743\u9650"},U=B=>{var y,x;return(x=(y=zu[B])!=null?y:ju[B])!=null?x:`\u7C7B\u578B ${B}`},Ku=B=>{if(B!==void 0)try{return JSON.parse(JSON.stringify(B))}catch(y){return console.warn("Failed to clone field property",y),B}},Hu=()=>{if(typeof window>"u")return null;try{const B=window.localStorage.getItem(X);return B?JSON.parse(B):null}catch(B){return console.error("\u8BFB\u53D6\u5FEB\u7167\u7F13\u5B58\u5931\u8D25",B),null}},Gu=B=>{if(!(typeof window>"u"))try{if(!B){window.localStorage.removeItem(X);return}window.localStorage.setItem(X,JSON.stringify(B))}catch(y){console.error("\u5199\u5165\u5FEB\u7167\u7F13\u5B58\u5931\u8D25",y)}},Ju=B=>{try{return new Date(B).toLocaleString()}catch{return B}};function Uu(){const B=c.exports.useRef(null),[y,x]=c.exports.useState("DARK"),[T,h]=c.exports.useState(!0),[D,L]=c.exports.useState([]),[uu,eu]=c.exports.useState(null),[w,I]=c.exports.useState({}),[_,M]=c.exports.useState({}),[C,P]=c.exports.useState(null),[tu,nu]=c.exports.useState(!1),[fu,R]=c.exports.useState(!1),[pu,ru]=c.exports.useState(!1),[V,au]=c.exports.useState(""),[H,Y]=c.exports.useState("all"),[su,Du]=c.exports.useState(0),[mu,Q]=c.exports.useState(!1),[W,lu]=c.exports.useState(!1),j=c.exports.useMemo(()=>Object.values(w).filter(Boolean).length,[w]),z=c.exports.useMemo(()=>Object.values(_).reduce((u,t)=>u+Object.values(t).filter(Boolean).length,0),[_]),O=j+z;c.exports.useEffect(()=>{var a;const u=(a=g)==null?void 0:a.bridge;let t;return(async()=>{if(u&&typeof u.getTheme=="function")try{const n=await u.getTheme();(n==="LIGHT"||n==="DARK")&&x(n)}catch(n){console.warn("\u83B7\u53D6\u4E3B\u9898\u5931\u8D25",n)}if(u&&typeof u.onThemeChange=="function")try{t=u.onThemeChange(n=>{var d;const r=(d=n==null?void 0:n.data)==null?void 0:d.theme;(r==="LIGHT"||r==="DARK")&&x(r)})}catch(n){console.warn("\u6CE8\u518C\u4E3B\u9898\u76D1\u542C\u5931\u8D25",n)}})(),()=>{t==null||t()}},[]),c.exports.useEffect(()=>{if(typeof document>"u")return;const u=document.body.classList;return u.remove("theme-light","theme-dark"),u.add(y==="LIGHT"?"theme-light":"theme-dark"),()=>{u.remove("theme-light","theme-dark")}},[y]);const N=c.exports.useCallback(async()=>{h(!0),eu(null);try{const u=await g.base.getTableMetaList(),t=await Promise.all(u.map(async l=>{const n=await(await g.base.getTableById(l.id)).getFieldMetaList();return{meta:l,fields:n}}));L(t),I(l=>{const a={};for(const n of t)l[n.meta.id]&&(a[n.meta.id]=!0);return a}),M(l=>{const a={};for(const n of t)if(l[n.meta.id]){const r={};for(const d of n.fields)l[n.meta.id][d.id]&&(r[d.id]=!0);Object.keys(r).length>0&&(a[n.meta.id]=r)}return a})}catch(u){console.error(u),eu("\u70B8\u4E86\uFF1A\u8BFB\u53D6\u8868\u7ED3\u6784\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u91CD\u8BD5\u3002"),p.error("\u52A0\u8F7D\u8868\u4FE1\u606F\u5931\u8D25\uFF0C\u5148\u522B\u62D4\u7535\u6E90\uFF0C\u5237\u65B0\u8BD5\u8BD5\u3002")}finally{h(!1)}},[]),iu=c.exports.useCallback(()=>{N()},[N]);c.exports.useEffect(()=>{N()},[N]),c.exports.useEffect(()=>{var n;const u=(n=g)==null?void 0:n.bridge;let t;const l=async()=>{var d;if(u&&typeof u.getData=="function")try{const s=await((d=u.getData)==null?void 0:d.call(u,Z));if(s){P(s),p.info("\u5DF2\u63A5\u7BA1\u4E0A\u4E00\u56DE\u5FEB\u7167\uFF0C\u653E\u5FC3\u5220\u4E5F\u8981\u614E\u91CD\u3002");return}if(s===null){P(null);return}}catch(s){console.warn("\u8BFB\u53D6 bridge \u5FEB\u7167\u5931\u8D25",s)}const r=Hu();r&&(P(r),p.info("\u5DF2\u63A5\u7BA1\u4E0A\u4E00\u56DE\u5FEB\u7167\uFF0C\u653E\u5FC3\u5220\u4E5F\u8981\u614E\u91CD\u3002"))},a=async()=>{if(u&&typeof u.onDataChange=="function")try{t=u.onDataChange(r=>{var m;const{key:d,value:s}=(m=r==null?void 0:r.data)!=null?m:{};if(d!==Z)return;const f=s!=null?s:null,E=B.current;JSON.stringify(E!=null?E:null)===JSON.stringify(f!=null?f:null)||P(f)})}catch(r){console.warn("\u6CE8\u518C bridge \u6570\u636E\u76D1\u542C\u5931\u8D25",r)}};return l(),a(),()=>{t==null||t()}},[]),c.exports.useEffect(()=>{B.current=C,Gu(C),(async()=>{var l,a;const t=(l=g)==null?void 0:l.bridge;if(!(!t||typeof t.setData!="function"))try{await((a=t.setData)==null?void 0:a.call(t,Z,C))}catch(n){console.warn("\u5199\u5165 bridge \u5FEB\u7167\u5931\u8D25",n)}})()},[C]);const Cu=c.exports.useMemo(()=>{const u=new Map;for(const l of D)for(const a of l.fields){const n=String(a.type);u.has(n)||u.set(n,U(a.type))}const t=Array.from(u.entries()).map(([l,a])=>({value:l,label:a})).sort((l,a)=>l.label.localeCompare(a.label,"zh-Hans"));return[{value:"all",label:"\u5168\u90E8\u5B57\u6BB5\u7C7B\u578B"},...t]},[D]),S=c.exports.useMemo(()=>{const u=V.trim().toLowerCase();return D.map(t=>{var d;const l=(d=t.meta.name)!=null?d:"\u65E0\u540D\u8868",a=u.length===0?!0:l.toLowerCase().includes(u),n=t.fields.filter(s=>{var E;return H!=="all"&&String(s.type)!==H?!1:u.length===0||a?!0:((E=s.name)!=null?E:"\u65E0\u540D\u5B57\u6BB5").toLowerCase().includes(u)}),r=a||n.length>0;return{bundle:t,visibleFields:n,tableMatches:a,shouldDisplay:r}}).filter(t=>t.shouldDisplay)},[D,V,H]),yu=c.exports.useCallback(u=>{I(t=>{const l={...t};return l[u]?delete l[u]:l[u]=!0,l})},[]),gu=c.exports.useCallback((u,t)=>{M(l=>{var r;const a={...(r=l[u])!=null?r:{}};a[t]?delete a[t]:a[t]=!0;const n={...l};return Object.keys(a).length===0?delete n[u]:n[u]=a,n})},[]),G=c.exports.useCallback(async u=>{nu(!0);try{const t=await g.base.getTableMetaList(),l=await Promise.all(t.map(async n=>{var s;const d=await(await g.base.getTableById(n.id)).getFieldMetaList();return{tableId:n.id,tableName:(s=n.name)!=null?s:"\u65E0\u540D\u8868",fields:d.map(f=>{var E;return{id:f.id,name:(E=f.name)!=null?E:"\u65E0\u540D\u5B57\u6BB5",type:f.type,property:Ku(f.property)}})}})),a={label:u,timestamp:new Date().toISOString(),tables:l};return P(a),p.success("\u5FEB\u7167\u641E\u5B9A\uFF0C\u968F\u65F6\u53CD\u6094\u3002"),!0}catch(t){return console.error(t),p.error("\u5FEB\u7167\u5931\u8D25\uFF0C\u6570\u636E\u8FD8\u6CA1\u5220\uFF0C\u51B7\u9759\u518D\u8BD5\u4E00\u6B21\u3002"),!1}finally{nu(!1)}},[]),q=c.exports.useCallback(async()=>{const u=[],t=await g.base.getTableMetaList(),l=t.map(s=>s.id);let a=Object.entries(w).filter(([,s])=>s).map(([s])=>s);const n=a.length>=l.length;let r=null,d=null;n&&l.length>0&&(r=l[l.length-1],d=t[l.length-1].name||"\u672A\u77E5\u8868",a=a.filter(s=>s!==r),p.info(`\u591A\u7EF4\u8868\u683C\u5FC5\u987B\u4FDD\u7559\u81F3\u5C11\u4E00\u5F20\u8868\uFF0C\u5C06\u4FDD\u7559\u8868 "${d}"\uFF0C\u4EC5\u5220\u9664\u5176\u5B57\u6BB5\uFF08\u7D22\u5F15\u5217\u9664\u5916\uFF09`));for(const s of a)try{await g.base.deleteTable(s)}catch(f){console.error(f),u.push(`\u8868 ${s} \u5220\u9664\u5931\u8D25`)}for(const[s,f]of Object.entries(_)){if(w[s]&&s!==r||s===r&&w[r])continue;const E=Object.entries(f).filter(([,F])=>F).map(([F])=>F);if(E.length!==0)try{const F=await g.base.getTableById(s),m=await F.getFieldMetaList(),$=new Map(m.map(k=>[k.id,k])),cu=s===r?E.filter(k=>{const J=$.get(k);return J&&J.isPrimary!==!0}):E;if(cu.length===0){s===r&&p.info(`\u8868 "${d}" \u7684\u7D22\u5F15\u5217\u5DF2\u81EA\u52A8\u6392\u9664\uFF0C\u65E0\u5176\u4ED6\u5B57\u6BB5\u53EF\u5220\u9664`);continue}for(const k of cu)try{await F.deleteField(k)}catch(J){console.error(J),u.push(`\u5B57\u6BB5 ${k} \u5220\u9664\u5931\u8D25`)}}catch(F){console.error(F),u.push(`\u65E0\u6CD5\u52A0\u8F7D\u8868 ${s}\uFF0C\u5B57\u6BB5\u6CA1\u6709\u5220\u9664`)}}if(r&&w[r])try{const s=await g.base.getTableById(r),E=(await s.getFieldMetaList()).filter(F=>F.isPrimary!==!0);if(E.length>0)for(const F of E)try{await s.deleteField(F.id)}catch(m){console.error(m),u.push(`\u5B57\u6BB5 ${F.name||F.id} \u5220\u9664\u5931\u8D25`)}else p.info(`\u8868 "${d}" \u4EC5\u5305\u542B\u7D22\u5F15\u5217\uFF0C\u65E0\u5176\u4ED6\u5B57\u6BB5\u53EF\u5220\u9664`)}catch(s){console.error(s),u.push("\u65E0\u6CD5\u5904\u7406\u6700\u540E\u4E00\u5F20\u8868\u7684\u5B57\u6BB5\u5220\u9664")}u.length>0?p.warning(`\u90E8\u5206\u64CD\u4F5C\u5931\u8D25\uFF1A${u.join(" / ")}`):p.success("\u8F70\u9686\u4E00\u58F0\uFF0C\u9009\u4E2D\u7684\u8868\u4E0E\u5B57\u6BB5\u5DF2\u7ECF\u6E05\u7406\u3002"),I({}),M({}),await N()},[w,_,N]),bu=c.exports.useCallback(async()=>{if(O===0){p.info("\u5148\u52FE\u9009\u8981\u6325\u5200\u7684\u76EE\u6807\uFF0C\u518D\u70B9\u5220\u9664\u3002");return}if(R(!0),!await G("\u5220\u9664\u524D\u81EA\u52A8\u5FEB\u7167")){R(!1),Nu.confirm({title:"\u5FEB\u7167\u5931\u8D25\uFF0C\u8981\u5192\u9669\u7EE7\u7EED\u5220\u9664\u5417\uFF1F",content:i("div",{className:"confirm-content",children:[e("p",{children:"\xB7 \u5220\u9664\u64CD\u4F5C\u4E0D\u53EF\u9006\uFF0C\u4E14\u5F53\u524D\u6CA1\u6709\u65B0\u5FEB\u7167\u3002"}),e("p",{children:"\xB7 \u8BF7\u786E\u4FDD\uFF1A\u5DF2\u5907\u4EFD / \u8EAB\u5904\u6C99\u7BB1 / \u660E\u767D\u540E\u679C\u3002"}),i("p",{children:["\xB7 \u672C\u6B21\u76EE\u6807\uFF1A",j," \u5F20\u8868\uFF0C",z," \u4E2A\u5B57\u6BB5\u3002"]})]}),width:420,okText:"\u786E\u8BA4\u5220\u9664",cancelText:"\u6211\u518D\u60F3\u60F3",onOk:async()=>{R(!0);try{await q()}finally{R(!1)}}});return}try{await q()}finally{R(!1)}},[O,G,q,j,z]),Au=c.exports.useCallback(async()=>{var t;if(!C){p.info("\u6CA1\u6709\u5FEB\u7167\u53EF\u56DE\u6EDA\uFF0C\u5148\u622A\u4E2A\u5FEB\u7167\u5427\u3002");return}ru(!0);const u=[];try{const l=await g.base.getTableMetaList(),a=new Set(l.map(n=>{var r;return(r=n.name)!=null?r:""}));for(const n of C.tables){let r=`\u267B\uFE0F ${n.tableName}`;try{const d=r;let s=1;for(;a.has(r);)r=`${d} (${s})`,s+=1;const{tableId:f}=await g.base.addTable({name:r,fields:[]});a.add(r);const E=await g.base.getTableById(f);try{const m=(await E.getFieldMetaList()).find($=>$.isPrimary);if(m){const $=(t=m.name)!=null&&t.includes("(\u7CFB\u7EDF\u9ED8\u8BA4)")?m.name:`${m.name||"\u4E3B\u952E"} (\u7CFB\u7EDF\u9ED8\u8BA4)`;$!==m.name&&await E.setField(m.id,{name:$})}}catch(F){console.error(F),u.push(`\u8868 ${r} \u4E3B\u952E\u91CD\u547D\u540D\u5931\u8D25`)}for(const F of n.fields){if(Pu.includes(F.type)){u.push(`\u8DF3\u8FC7\u7CFB\u7EDF\u5B57\u6BB5 ${F.name}\uFF08\u7C7B\u578B ${U(F.type)}\uFF09`);continue}if(Ru.has(F.type)){u.push(`\u590D\u6742\u5B57\u6BB5 ${F.name}\uFF08\u7C7B\u578B ${U(F.type)}\uFF09\u6682\u4E0D\u652F\u6301\u56DE\u6EDA`);continue}try{const m={type:F.type,name:F.name,property:F.property};await E.addField(m)}catch(m){console.error(m),u.push(`\u5B57\u6BB5 ${F.name} \u91CD\u5EFA\u5931\u8D25\uFF08\u8868 ${r}\uFF09`)}}}catch(d){console.error(d),u.push(`\u8868 ${r} \u91CD\u5EFA\u5931\u8D25`)}}u.length>0?p.warning(`\u56DE\u6EDA\u90E8\u5206\u6210\u529F\uFF1A${u.join(" / ")}`):p.success("\u5FEB\u7167\u56DE\u6EDA\u5B8C\u6210\uFF0C\u8BEF\u5220\u7684\u7ED3\u6784\u5DF2\u590D\u6D3B\u3002"),await N()}finally{ru(!1)}},[C,N]),xu=c.exports.useCallback(async()=>{await G("\u624B\u52A8\u5FEB\u7167")},[G]),Tu=c.exports.useCallback(()=>{if(S.length===0){p.info("\u5F53\u524D\u7B5B\u9009\u6CA1\u6709\u8868\u53EF\u4EE5\u9009\u62E9\u3002");return}const u={};for(const{bundle:t}of S)u[t.meta.id]=!0;I(u),M({}),p.success("\u5DF2\u9009\u4E2D\u6240\u6709\u7B5B\u9009\u5185\u7684\u8868\u3002")},[S]),wu=c.exports.useCallback(()=>{if(S.length===0){p.info("\u5F53\u524D\u7B5B\u9009\u6CA1\u6709\u5B57\u6BB5\u53EF\u4EE5\u9009\u62E9\u3002");return}const u={};for(const{bundle:t,visibleFields:l}of S)if(!w[t.meta.id]&&l.length!==0){u[t.meta.id]={};for(const a of l)u[t.meta.id][a.id]=!0}M(u),p.success("\u5DF2\u9009\u4E2D\u5F53\u524D\u7B5B\u9009\u7684\u5B57\u6BB5\u3002")},[S,w]),ou=c.exports.useCallback(()=>{I(()=>({})),M(()=>({})),au(""),Y("all"),Du(u=>u+1),p.info("\u9009\u62E9\u5DF2\u6E05\u7A7A\u3002")},[]);return i("div",{className:"app-shell",children:[i("header",{className:"app-header",children:[e(b.Title,{heading:3,className:"app-title",children:"\u6279\u91CF\u5220\u5B57\u6BB5 \xB7 BulkDel"}),i("div",{className:"app-subtitle",children:[e(b.Text,{type:"tertiary",strong:!0,children:"\u6279\u91CF\u5220\u9664\uFF0C\u4E00\u952E\u6E05\u7A7A\u6570\u636E"}),e(b.Text,{type:"tertiary",style:{display:"block",marginTop:"4px"},children:"\u6B64\u63D2\u4EF6\u53EF\u5FEB\u901F\u5220\u9664\u5927\u91CF\u6570\u636E\u3002\u5EFA\u8BAE\u5220\u9664\u524D\u5148\u5907\u4EFD\u5F53\u524D\u7248\u672C\uFF0C\u786E\u4FDD\u6570\u636E\u53EF\u6062\u590D\u3002"})]})]}),e("div",{className:"danger-banner",children:i("div",{className:"danger-content",children:[e("div",{className:"danger-title",children:"\u26A0\uFE0F \u91CD\u8981\u63D0\u793A\uFF1A"}),i("div",{className:"danger-body",children:[e("p",{children:"\u5220\u9664\u64CD\u4F5C\u7ACB\u5373\u751F\u6548\uFF0C\u8BF7\u8C28\u614E\u4F7F\u7528"}),e("p",{children:"\u98DE\u4E66\u591A\u7EF4\u8868\u683C\u652F\u6301\u300C\u5386\u53F2\u7248\u672C\u300D\u6062\u590D\uFF0C\u53EF\u5728\u64CD\u4F5C\u540E\u56DE\u6EAF\u5B8C\u6574\u6570\u636E\uFF08\u5305\u62EC\u8BB0\u5F55\u5185\u5BB9\uFF09"}),e("p",{children:"\u5EFA\u8BAE\u5220\u9664\u524D\uFF1A\u786E\u8BA4\u64CD\u4F5C\u6743\u9650\uFF0C\u660E\u786E\u8D23\u4EFB\u4EBA\uFF0C\u5FC5\u8981\u65F6\u624B\u52A8\u5907\u4EFD\u5173\u952E\u6570\u636E"})]})]})}),i("section",{className:"filters",children:[i("div",{className:"filters-inputs",children:[e("div",{className:"filters-field filters-field--search",children:e(Lu,{prefix:e(ku,{}),placeholder:"\u6309\u8868\u540D / \u5B57\u6BB5\u540D\u68C0\u7D22",value:V,onChange:u=>au(u)})}),e("div",{className:"filters-field filters-field--type",children:e(vu,{placeholder:"\u7B5B\u9009\u5B57\u6BB5\u7C7B\u578B\uFF08\u53EF\u641C\u7D22\uFF09",value:H,onChange:u=>{typeof u=="string"&&Y(u)},renderSelectedItem:u=>{var t;return!u||u.value==="all"||u.value===void 0?"\u5168\u90E8\u5B57\u6BB5\u7C7B\u578B":`\u5B57\u6BB5\u7C7B\u578B\uFF1A${(t=u.label)!=null?t:""}`},filter:!0,showClear:!0,onClear:()=>Y("all"),optionList:Cu})})]}),i("div",{className:"filters-actions",children:[e(A,{theme:"light",onClick:Tu,children:"\u5168\u9009\u8868"}),e(A,{theme:"light",onClick:wu,children:"\u5168\u9009\u5B57\u6BB5"}),e(A,{theme:"borderless",type:"danger",onClick:u=>{u.preventDefault(),u.stopPropagation(),ou()},children:"\u6E05\u7A7A\u9009\u62E9"})]})]}),mu&&i(Mu,{children:[e("div",{className:"snapshot-overlay",onClick:()=>Q(!1)}),i("div",{className:"snapshot-drawer",children:[i("div",{className:"snapshot-drawer-header",children:[e(b.Title,{heading:5,children:"\u64CD\u4F5C\u524D\u81EA\u52A8\u5FEB\u7167"}),e(A,{type:"tertiary",theme:"borderless",icon:e(du,{}),onClick:()=>Q(!1),style:{minWidth:"auto",padding:"4px"}})]}),i("div",{className:"snapshot-drawer-content",children:[i("div",{className:"snapshot-card__meta",children:[e(b.Text,{strong:!0,children:C?"\u81EA\u52A8\u5FEB\u7167\u5DF2\u4FDD\u5B58":"\u5C1A\u672A\u521B\u5EFA\u5FEB\u7167"}),e(b.Text,{type:"tertiary",children:C?`\u5FEB\u7167\u65F6\u95F4\uFF1A${Ju(C.timestamp)}`:"\u5220\u9664\u524D\u8BF7\u52A1\u5FC5\u4FDD\u5B58\u4E00\u6B21\u7ED3\u6784\u5FEB\u7167"}),C&&i("div",{style:{marginTop:"8px"},children:[i(b.Text,{type:"tertiary",style:{display:"block",marginBottom:"8px"},children:["\u{1F4CB} ",e("strong",{children:"\u8BF4\u660E\uFF1A"}),"\u672C\u5FEB\u7167\u4EC5\u4FDD\u5B58\u6570\u636E\u8868\u548C\u5B57\u6BB5\u7ED3\u6784\uFF0C\u4E0D\u5305\u542B\u6570\u636E\u8BB0\u5F55\u5185\u5BB9\u3002"]}),i(b.Text,{type:"warning",style:{display:"block"},children:["\u{1F4A1} ",e("strong",{children:"\u6E29\u99A8\u63D0\u793A\uFF1A"})]}),i("ul",{style:{marginTop:"4px",marginBottom:0,paddingLeft:"20px"},children:[e("li",{children:"\u5982\u9700\u6062\u590D\u6570\u636E\u8BB0\u5F55\u5185\u5BB9\uFF1A\u8FDB\u5165\u300C\u5386\u53F2\u8BB0\u5F55\u300D\u2192 \u627E\u5230\u5BF9\u5E94\u65F6\u95F4\u70B9\u8BB0\u5F55 \u2192 \u70B9\u51FB\u300C\u8FD8\u539F\u6B64\u7248\u672C\u300D\uFF0C\u53EF\u6062\u590D\u5B8C\u6574\u6570\u636E\uFF08\u5305\u62EC\u8BB0\u5F55\u5185\u5BB9\uFF09"}),e("li",{children:"\u672C\u5FEB\u7167\u4EC5\u7528\u4E8E\u6062\u590D\u8868\u7ED3\u6784\u548C\u5B57\u6BB5\u7ED3\u6784\uFF0C\u4F5C\u4E3A\u989D\u5916\u4FDD\u969C"})]})]})]}),i("div",{className:"snapshot-card__actions",children:[e(v,{content:"\u5237\u65B0\u5F53\u524D\u7684\u8868\u4E0E\u5B57\u6BB5\u6E05\u5355",children:e(A,{icon:e(Fu,{}),onClick:iu,loading:T,block:!0,children:"\u5237\u65B0"})}),e(v,{content:"\u624B\u52A8\u4FDD\u5B58\u4E00\u4EFD\u7ED3\u6784\u5FEB\u7167\uFF0C\u5FC3\u91CC\u66F4\u8E0F\u5B9E",children:e(A,{icon:e(Bu,{}),theme:"light",onClick:xu,loading:tu,block:!0,children:"\u8BB0\u5F55\u5FEB\u7167"})}),e(v,{content:"\u64A4\u9500\u6700\u8FD1\u4E00\u6B21\u7206\u7834\uFF08\u5C3D\u529B\u800C\u4E3A\u7248\uFF09",children:e(A,{icon:e(Ou,{}),theme:"light",onClick:Au,loading:pu,disabled:!C||tu,block:!0,children:"\u5FEB\u7167\u56DE\u6EDA"})})]})]})]})]}),i("aside",{className:`delete-bubble ${W?"delete-bubble-open":""}`,children:[i("div",{className:"floating-actions",children:[e(v,{content:W?"\u6536\u8D77\u5220\u9664\u9762\u677F":"\u67E5\u770B\u5220\u9664\u7EDF\u8BA1\u5E76\u6267\u884C\u4E00\u952E\u6E05\u7406",position:"left",children:e(A,{className:"floating-action-button floating-action-button--delete",theme:"solid",type:"danger",icon:e(Eu,{}),onClick:()=>lu(u=>!u),children:e("span",{className:"delete-bubble__count",children:O})})}),e(v,{content:T?"\u5237\u65B0\u4E2D\u2026":"\u624B\u52A8\u5237\u65B0\u6570\u636E\u8868",children:e(A,{type:"tertiary",theme:"solid",icon:e(Fu,{}),onClick:iu,loading:T,disabled:T,"aria-label":"\u624B\u52A8\u5237\u65B0\u6570\u636E\u8868",className:"floating-action-button floating-action-button--refresh"})}),e(v,{content:C?"\u67E5\u770B\u5FEB\u7167\u4FE1\u606F":"\u64CD\u4F5C\u524D\u81EA\u52A8\u5FEB\u7167",children:e(A,{type:C?"primary":"tertiary",theme:"solid",icon:e(Bu,{}),onClick:()=>Q(!0),className:"floating-action-button floating-action-button--snapshot"})})]}),W&&i("section",{className:"delete-panel",children:[i("div",{className:"delete-panel__header",children:[e(b.Text,{strong:!0,children:"\u4E00\u952E\u6E05\u7406"}),e(A,{type:"tertiary",theme:"borderless",icon:e(du,{}),onClick:()=>lu(!1),style:{minWidth:"auto",padding:"4px"}})]}),i("div",{className:"delete-panel__body",children:[i("div",{className:"delete-panel__metrics",children:[i(K,{size:"large",children:["\u5DF2\u9009\u8868\uFF1A",j]}),i(K,{size:"large",children:["\u5DF2\u9009\u5B57\u6BB5\uFF1A",z]}),i(K,{size:"large",children:["\u5FEB\u7167\uFF1A",C?`\u5DF2\u4FDD\u5B58 \xB7 ${C.label}`:"\u672A\u521B\u5EFA"]})]}),i(b.Text,{type:"tertiary",className:"delete-panel__hint",children:["\u5F53\u524D\u7B5B\u9009\uFF1A",S.length," \u5F20\u8868"]})]}),i("div",{className:"delete-panel__actions",children:[e(A,{theme:"light",onClick:ou,children:"\u6E05\u7A7A\u9009\u62E9"}),e($u,{title:"\u7EC8\u6781\u786E\u8BA4\uFF1A\u5220\u9664\u6240\u9009\u8868\u548C\u5B57\u6BB5\uFF1F",content:i("div",{className:"confirm-content",children:[e("p",{children:"\xB7 \u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\uFF0C\u6570\u636E\u5C06\u77AC\u95F4\u84B8\u53D1\u3002"}),e("p",{children:"\xB7 \u8BF7\u786E\u8BA4\uFF1A\u5907\u4EFD\u4E0E\u6743\u9650\u90FD\u51C6\u5907\u59A5\u5F53\u3002"}),i("p",{children:["\xB7 \u76EE\u6807\uFF1A",j," \u5F20\u8868\uFF0C",z," \u4E2A\u5B57\u6BB5\u3002"]})]}),position:"left",onConfirm:bu,disabled:O===0,children:i(A,{theme:"solid",type:"danger",icon:e(Eu,{}),loading:fu,disabled:O===0,children:["\u4E00\u952E\u6E05\u7406\uFF08",O,"\uFF09"]})})]})]})]}),e("main",{className:"table-list",children:T?e("div",{className:"loading",children:e(Iu,{size:"large",children:"\u6B63\u5728\u53EC\u5524\u5168\u90E8\u8868\u683C\u2026"})}):uu?e("div",{className:"loading",children:e(b.Text,{type:"danger",children:uu})}):S.length===0?e(_u,{description:"\u5F53\u524D\u7B5B\u9009\u4E0B\u6CA1\u6709\u8868\u683C\uFF0C\u6362\u4E2A\u59FF\u52BF\u8BD5\u8BD5\u3002"}):S.map(({bundle:u,visibleFields:t,tableMatches:l})=>{var r;const a=!!w[u.meta.id],n=(r=_[u.meta.id])!=null?r:{};return i("article",{className:`table-card ${a?"table-card-selected":""}`,children:[i("header",{className:"table-card__header",children:[e(hu,{checked:a,onChange:()=>yu(u.meta.id),children:e(b.Text,{strong:!0,children:u.meta.name||"\u65E0\u540D\u8868"})},`table-${u.meta.id}-${su}`),i(K,{size:"large",children:["\u5B57\u6BB5 ",u.fields.length]})]}),e("ul",{className:"field-list",children:t.length===0?e("li",{className:"field-item field-item-empty",children:e(b.Text,{type:"tertiary",children:l?"\u8BE5\u8868\u6682\u65E0\u7B26\u5408\u7B5B\u9009\u6761\u4EF6\u7684\u5B57\u6BB5\u3002":"\u5B57\u6BB5\u4E0D\u5339\u914D\u641C\u7D22\u5173\u952E\u5B57\u3002"})}):t.map(d=>{const s=!!n[d.id],f=U(d.type),E=d.isPrimary===!0,F=e(hu,{disabled:a||E,checked:s,onChange:()=>gu(u.meta.id,d.id),children:d.name||"\u65E0\u540D\u5B57\u6BB5"},`${d.id}-${su}`);return i("li",{className:`field-item ${s?"field-item-selected":""}`,children:[E?e(v,{content:"\u7D22\u5F15\u5217\u4E0D\u53EF\u5220\u9664",children:F}):F,e(K,{size:"small",children:f})]},d.id)})})]},u.meta.id)})}),i("footer",{className:"app-footer",children:[i(b.Text,{type:"tertiary",children:["\u{1F4A1} ",e("strong",{children:"\u4F7F\u7528\u5EFA\u8BAE\uFF1A"})]}),i("ul",{style:{marginTop:"8px",marginBottom:0,paddingLeft:"20px"},children:[e("li",{children:"\u9996\u6B21\u4F7F\u7528\u5EFA\u8BAE\u5148\u5728\u6D4B\u8BD5\u8868\u683C\u4E2D\u8BD5\u8FD0\u884C\uFF0C\u719F\u6089\u529F\u80FD\u540E\u518D\u6B63\u5F0F\u4F7F\u7528"}),e("li",{children:"\u5982\u9700\u6062\u590D\u6570\u636E\uFF1A\u8FDB\u5165\u300C\u5386\u53F2\u8BB0\u5F55\u300D\u2192 \u627E\u5230\u5BF9\u5E94\u65F6\u95F4\u70B9\u8BB0\u5F55 \u2192 \u70B9\u51FB\u300C\u8FD8\u539F\u6B64\u7248\u672C\u300D"}),e("li",{children:"\u91CD\u8981\u6570\u636E\u5EFA\u8BAE\u989D\u5916\u624B\u52A8\u5907\u4EFD\u4E00\u4EFD"})]})]})]})}function Vu(B){const[y,x]=c.exports.useState(!1),T=e("div",{children:i("div",{className:"errTop",children:['After running the project, please get the webview address and paste it into the Base table "Extended Script" for use. See:\xA0',e("a",{target:"_blank",href:"https://bytedance.feishu.cn/docx/HazFdSHH9ofRGKx8424cwzLlnZc",children:"Development Guide"})]})});return c.exports.useEffect(()=>{if(B.neverShowBanner)return;const h=new Promise((D,L)=>{setTimeout(()=>{L(!1)},3e3)});Promise.race([g.bridge.getLanguage(),h]).then(D=>{x(!1)}).catch(()=>{x(!0)})},[]),B.neverShowBanner?B.children||null:i("div",{children:[y&&T,B.children]})}Su.createRoot(document.getElementById("root")).render(e(Vu,{children:e(Uu,{})}));
